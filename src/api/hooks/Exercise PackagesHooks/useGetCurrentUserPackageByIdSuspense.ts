/**
 * Generated by Kubb (https://kubb.dev/).
 * Do not edit manually.
 */

import fetch from "@/lib/api-client";
import type {
  GetCurrentUserPackageByIdQueryResponse,
  GetCurrentUserPackageByIdPathParams,
} from "../../types/exercisePackagesController/GetCurrentUserPackageById.ts";
import type { RequestConfig, ResponseErrorConfig } from "@/lib/api-client";
import type {
  QueryKey,
  QueryClient,
  UseSuspenseQueryOptions,
  UseSuspenseQueryResult,
} from "@tanstack/react-query";
import { queryOptions, useSuspenseQuery } from "@tanstack/react-query";

export const getCurrentUserPackageByIdSuspenseQueryKey = (
  id: GetCurrentUserPackageByIdPathParams["id"],
) => [{ url: "/api/exercise-packages/me/:id", params: { id: id } }] as const;

export type GetCurrentUserPackageByIdSuspenseQueryKey = ReturnType<
  typeof getCurrentUserPackageByIdSuspenseQueryKey
>;

/**
 * @description Retrieve a specific exercise package with the current user's subscription information. Returns full package details along with subscription information (if subscribed) and current pricing options (monthlyPrice and yearlyPrice in VND). Can be used to check access to any package (owned or not).
 * @summary Get current user's subscription to a specific package
 * {@link /api/exercise-packages/me/:id}
 */
export async function getCurrentUserPackageByIdSuspense(
  id: GetCurrentUserPackageByIdPathParams["id"],
  config: Partial<RequestConfig> & { client?: typeof fetch } = {},
) {
  const { client: request = fetch, ...requestConfig } = config;

  const res = await request<
    GetCurrentUserPackageByIdQueryResponse,
    ResponseErrorConfig<Error>,
    unknown
  >({
    method: "GET",
    url: `/api/exercise-packages/me/${id}`,
    ...requestConfig,
  });
  return res.data;
}

export function getCurrentUserPackageByIdSuspenseQueryOptions(
  id: GetCurrentUserPackageByIdPathParams["id"],
  config: Partial<RequestConfig> & { client?: typeof fetch } = {},
) {
  const queryKey = getCurrentUserPackageByIdSuspenseQueryKey(id);
  return queryOptions<
    GetCurrentUserPackageByIdQueryResponse,
    ResponseErrorConfig<Error>,
    GetCurrentUserPackageByIdQueryResponse,
    typeof queryKey
  >({
    enabled: !!id,
    queryKey,
    queryFn: async ({ signal }) => {
      config.signal = signal;
      return getCurrentUserPackageByIdSuspense(id, config);
    },
  });
}

/**
 * @description Retrieve a specific exercise package with the current user's subscription information. Returns full package details along with subscription information (if subscribed) and current pricing options (monthlyPrice and yearlyPrice in VND). Can be used to check access to any package (owned or not).
 * @summary Get current user's subscription to a specific package
 * {@link /api/exercise-packages/me/:id}
 */
export function useGetCurrentUserPackageByIdSuspense<
  TData = GetCurrentUserPackageByIdQueryResponse,
  TQueryKey extends QueryKey = GetCurrentUserPackageByIdSuspenseQueryKey,
>(
  id: GetCurrentUserPackageByIdPathParams["id"],
  options: {
    query?: Partial<
      UseSuspenseQueryOptions<
        GetCurrentUserPackageByIdQueryResponse,
        ResponseErrorConfig<Error>,
        TData,
        TQueryKey
      >
    > & { client?: QueryClient };
    client?: Partial<RequestConfig> & { client?: typeof fetch };
  } = {},
) {
  const { query: queryConfig = {}, client: config = {} } = options ?? {};
  const { client: queryClient, ...queryOptions } = queryConfig;
  const queryKey =
    queryOptions?.queryKey ?? getCurrentUserPackageByIdSuspenseQueryKey(id);

  const query = useSuspenseQuery(
    {
      ...getCurrentUserPackageByIdSuspenseQueryOptions(id, config),
      queryKey,
      ...queryOptions,
    } as unknown as UseSuspenseQueryOptions,
    queryClient,
  ) as UseSuspenseQueryResult<TData, ResponseErrorConfig<Error>> & {
    queryKey: TQueryKey;
  };

  query.queryKey = queryKey as TQueryKey;

  return query;
}

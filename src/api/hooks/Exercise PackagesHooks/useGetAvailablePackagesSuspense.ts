/**
 * Generated by Kubb (https://kubb.dev/).
 * Do not edit manually.
 */

import fetch from "@/lib/api-client";
import type {
  GetAvailablePackagesQueryResponse,
  GetAvailablePackagesQueryParams,
} from "../../types/exercisePackagesController/GetAvailablePackages.ts";
import type { RequestConfig, ResponseErrorConfig } from "@/lib/api-client";
import type {
  QueryKey,
  QueryClient,
  UseSuspenseQueryOptions,
  UseSuspenseQueryResult,
} from "@tanstack/react-query";
import { queryOptions, useSuspenseQuery } from "@tanstack/react-query";

export const getAvailablePackagesSuspenseQueryKey = (
  params: GetAvailablePackagesQueryParams,
) =>
  [
    { url: "/api/exercise-packages/me/available" },
    ...(params ? [params] : []),
  ] as const;

export type GetAvailablePackagesSuspenseQueryKey = ReturnType<
  typeof getAvailablePackagesSuspenseQueryKey
>;

/**
 * @description Retrieve exercise packages available for the current user to purchase. Excludes packages the user already has active subscriptions for. Each package includes pricing information (monthlyPrice and yearlyPrice in VND). Supports pagination and search by title. Examples: ?page=0&size=20 | ?query=shoulder
 * @summary Get available exercise packages for current user
 * {@link /api/exercise-packages/me/available}
 */
export async function getAvailablePackagesSuspense(
  params: GetAvailablePackagesQueryParams,
  config: Partial<RequestConfig> & { client?: typeof fetch } = {},
) {
  const { client: request = fetch, ...requestConfig } = config;

  const res = await request<
    GetAvailablePackagesQueryResponse,
    ResponseErrorConfig<Error>,
    unknown
  >({
    method: "GET",
    url: `/api/exercise-packages/me/available`,
    params,
    ...requestConfig,
  });
  return res.data;
}

export function getAvailablePackagesSuspenseQueryOptions(
  params: GetAvailablePackagesQueryParams,
  config: Partial<RequestConfig> & { client?: typeof fetch } = {},
) {
  const queryKey = getAvailablePackagesSuspenseQueryKey(params);
  return queryOptions<
    GetAvailablePackagesQueryResponse,
    ResponseErrorConfig<Error>,
    GetAvailablePackagesQueryResponse,
    typeof queryKey
  >({
    enabled: !!params,
    queryKey,
    queryFn: async ({ signal }) => {
      config.signal = signal;
      return getAvailablePackagesSuspense(params, config);
    },
  });
}

/**
 * @description Retrieve exercise packages available for the current user to purchase. Excludes packages the user already has active subscriptions for. Each package includes pricing information (monthlyPrice and yearlyPrice in VND). Supports pagination and search by title. Examples: ?page=0&size=20 | ?query=shoulder
 * @summary Get available exercise packages for current user
 * {@link /api/exercise-packages/me/available}
 */
export function useGetAvailablePackagesSuspense<
  TData = GetAvailablePackagesQueryResponse,
  TQueryKey extends QueryKey = GetAvailablePackagesSuspenseQueryKey,
>(
  params: GetAvailablePackagesQueryParams,
  options: {
    query?: Partial<
      UseSuspenseQueryOptions<
        GetAvailablePackagesQueryResponse,
        ResponseErrorConfig<Error>,
        TData,
        TQueryKey
      >
    > & { client?: QueryClient };
    client?: Partial<RequestConfig> & { client?: typeof fetch };
  } = {},
) {
  const { query: queryConfig = {}, client: config = {} } = options ?? {};
  const { client: queryClient, ...queryOptions } = queryConfig;
  const queryKey =
    queryOptions?.queryKey ?? getAvailablePackagesSuspenseQueryKey(params);

  const query = useSuspenseQuery(
    {
      ...getAvailablePackagesSuspenseQueryOptions(params, config),
      queryKey,
      ...queryOptions,
    } as unknown as UseSuspenseQueryOptions,
    queryClient,
  ) as UseSuspenseQueryResult<TData, ResponseErrorConfig<Error>> & {
    queryKey: TQueryKey;
  };

  query.queryKey = queryKey as TQueryKey;

  return query;
}
